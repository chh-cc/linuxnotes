## 简介

内容分发网络CDN将源站静态资源缓存到阿里云遍布全球的加速节点，当终端用户请求访问和获取源站资源时无需回源，可就近获取CDN节点上已经缓存的资源，提高资源访问速度，同时分担源站压力



CDN原理：

**加速域名**：比如图中的static.example.com就是加速域名，也就是使用该域名访问的静态资源会走CDN加速。

**源站**：也就是资源实际存放的节点，通常是服务提供方或者像OSS这样专门存储资源的地方。

同时也要配置一条加速域名指向CDN的智能DNS服务器的一条CNAME记录比如是。

```css
static.example.com       IN        CNAME         static.example.w.kunlunaq.com
```

访问流程：

1. 访问static.example.com/a.mp4这个静态资源，首先根据配置的cname找到static.example.com指向的static.example.w.kunlunaq.com，然后查询static.example.w.kunlunaq.com会返回离你最近的一个节点的IP地址。
2. 根据1返回的IP地址去取相应的资源，如果资源已经存在在该节点，则直接返回给客户端，如果没有则去源站获取，并缓存在该节点，这一部叫做**回源**。在设置的TTL时间之前，会一直从该近节点获取然不是去源站获取，不然也就失去了加速的意义。TTL之后又会重新去源站取相应资源。



说明：

- **静态内容**是指在不同请求中访问到的数据都相同的静态文件。例如：图片、视频、网站中的文件（html、css、js）、软件安装包、apk文件、压缩包文件等。
- **动态内容**是指在不同请求中访问到的数据不相同的动态内容。例如：网站中的文件（asp、jsp、php、perl、cgi）、API接口、数据库交互请求等。

## 使用

流程：

开通cdn➡️添加加速域名➡️配置域名➡️配置CNAME



首次在CDN控制台添加一个新域名时，需要完成域名归属权验证（只需要校验[根域名](https://help.aliyun.com/document_detail/27144.htm#section-955-288-lev)的归属权）。



1. 您希望在CDN加速前后，资源的访问域名是否发生变化？

1. 1. 变化，CDN加速后用另一个域名访问。（创建域名后需关注文章「其他常用配置」中的回源HOST功能）
   2. 不变，原有域名业务全部迁移到CDN上。

1. 您希望加速的业务场景是什么样的？

1. 1. 多种资源共存的门户网站、企业官网、个人博客等
   2. 点播视频播放
   3. 安装包/大文件下载

1. 您的源站内容是动静态业务独立部署的吗？（动态请求例如进行登录、评论、提交订单等操作，静态请求例如获取图片、视频、文档等操作）

1. 1. 是的，动静态请求使用了不同站点域名接入
   2. 不是，动静态请求使用了相同站点域名接入（推荐加速场景使用全站加速DCDN）

2. 

添加加速域名：

**加速域名：**如果您希望CDN加速前后访问域名不变，加速域名中填写您需要加速的业务域名（例如 video.aliyun.com）即可。如果加速时需要使用其他域名，您也可以自行定义域名添加（例如cdn.aliyun.com）

**域名类型**：支持子域名（例如，`example.aliyundoc.com`）或泛域名（例如，`*.aliyundoc.com`）。



填写源站信息比较多：

- **源站信息**-一般情况选择OSS域名、IP或者源站域名（**即你的网站域名，务必填写源站信息为您的网站域名**）：如果您的网站图片等小文件是通过OSS存储的，则需要选择OSS域名；如果您的网站图片等小文件存放在网站服务器，则可以填写源站域名或者服务器IP地址；
- **优先级**-默认为主；
- **权重**-除非您设置多个源站，否则这里无所谓了；
- **端口**-建议使用默认的80端口即可。

## cdn加速oss资源

![场景图](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9755827261/p50521.png)

## cdn加速ecs资源

![应用场景](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0211008951/p51266.png)

