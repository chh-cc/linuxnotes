# 添加主机

## 自动发现

![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425153023.png)        

![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425153006.png)        

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425153459.png)        

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425153516.png)        

## 自动注册

修改agent配置文件：

```shell
[root@web02 ~]# cat /etc/zabbix/zabbix_agentd.conf        
PidFile=/var/run/zabbix/zabbix_agentd.pid
LogFile=/var/log/zabbix/zabbix_agentd.log
LogFileSize=0
Server=10.0.1.61
ServerActive=10.0.1.61    #zabbixserver的IP,可写多个
Hostname=web02    #与网页添加监控主机的主机名一致
Include=/etc/zabbix/zabbix_agentd.d/*.conf
```

web操作：

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425154134.png)        

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425154152.png)        

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425154225.png)        

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425154248.png)        

## 主动模式和被动模式

默认为被动模式：server向agent（10050端口）请求数据，100个监控项要100个来回，要的时候才返回

主动模式：agent将采集的数据主动推送给server（10051端口），100个监控项1个回合，将所需要的100个打包，然后一次发过去，发过去之后，客户端全部执行完再一次返回给服务端。

克隆模板：

完全克隆原来被动模式的模版为主动模式

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425154545.png)        

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425154559.png)        

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425154605.png)        

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425154609.png)        

把模板关联到主机，然后重启主机的agent配置文件

查看最新数据，发现获取数据的时间都是一样的：

​        ![img](https://gitee.com/c_honghui/picture/raw/master/img/20210425154621.png)        