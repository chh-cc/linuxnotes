## 架构

1. 数据库的架构

   连接器：用于处理客户端连接请求

   查询缓冲：缓冲查询结果提高查询性能

   分析器：分析查询语句

   优化器：对查询进行优化

   执行器：执行查询操作

   存储引擎：负责数据的存储和提取

2. 主从复制原理

   将主库的ddl和dml操作通过二进制日志binlog传到从数据库，然后在从库对这些日志重新执行，从而使从库和主库的数据保持一致

3. 读写分离了解吗

   读写分离的原理是将数据库的读写请求分散到不同的节点，通过搭建主从集群，主机负责读写操作，从机只负责读操作，主机通过复制将数据同步到从机，每台数据库服务器存储了所有的业务数据。

4. 读写分离的分配怎么实现

   将读写操作区分开然后访问不同的数据库服务器，一般通过程序代码封装或中间件封装

   程序代码封装指在代码中抽象一个数据访问层 ，实现读写操作分离和数据库服务器连接的管理。

   中间件封装指的是独立一套系统出来，实现读写操作分离和数据库服务器连接的管理。

5. innodb和myisam的区别

   它们的区别主要在于其支持的事务处理和锁定级别，innodb支持事务处理和行级锁定，而myisam不支持事务处理并且只支持表级锁定，因此在需要进行事务处理或高并发读写需求的场景下，innodb更加合适

6. 事务？

   由一系列sql语句组成，作为单个逻辑单元执行。如果其中一个语句出错，整个事务将被回滚并撤销之前已经完成的任何修改。通过使用事务，可以确保数据在多个操作中的一致性和完整性。

7. 如何优化查询性能

   优化mysql服务器，如缓存大小、最大连接数等

   优化sql语句，合理使用索引，避免扫描大量数据等

8. 如何备份和恢复

   rds可通过命令或图形界面进行逻辑备份，仅限通过控制台或API进行物理备份；

   rds可通过命令或图形界面进行逻辑恢复，仅限通过控制台或API进行物理恢复

## 排障

1. 主从同步延迟

   

2. Cpu100%

   一般是慢sql和高qps导致

3. 隔一段时间出现IOPS100%

   查看IOPS100%的时间段QPS是否增高有没有慢日志，不行就排查IOPS100%时段的所有sql语句

4. 连接数100%

   快速解决的方法就是选择kill掉一些会话

   根本解决方法，查看是空闲连接多导致的还是活跃连接多导致的，如果是空闲连接多导致的可能需要优化一下代码；如果是活跃连接多导致的，要看下是业务高并发导致还是锁导致还是性能问题导致，再逐一对应解决