# 网络

1、七层模型

物理层、链路层、网络层、传输层、会话层、表示层、应用层

2、TCP和UDP的区别

TCP可靠的，面向连接的

UDP不可靠的，面向无连接的

3、TCP三次握手

客户端发送带有SYN标志的数据包到服务端（客户端进入SYN-SENT阶段；表示请求建立连接）

服务端收到后发送带有SYN和ACK标志的数据包到客户端（服务器端从LISTEN进入SYN-RCVD阶段；表示同意创建新连接）

客户端发送带有ACK标志的数据包到服务端（客户端进入ESTABLISHED阶段；表示收到服务端同意连接的信号）服务端收到后进入ESTABLISHED阶段

4、为什么要三次握手

为了建立可靠的通信连接，确认双方的发送和接收是否正常

5、四次挥手

客户端发送带有FIN标志的报文给服务端（客户端进入FIN-WAIT-1阶段；表示请求连接释放）

服务端收到后发送带有ACK标志的报文给客户端（服务端进入CLOSE-WAIT阶段，客户端进入FIN-WAIT-2阶段；表示接收到客户端发送的释放连接请求）

服务端发送带有FIN标志的报文给客户端（服务端进入LAST-ACK阶段；表示准备要释放连接）

客户端收到后发送带有ACK标志的报文给服务端（客户端进入TIME-WAIT阶段）这时TCP连接还没完全断开，客户端等待2MSL才会进入CLOSED阶段，服务器端收到ACK报文后才进入CLOSED阶段

6、为什么建立连接是3次断开连接是4次

建立连接的时候接收方将SYN和ACK结合在一个报文发送，所以少了一次报文发送

因为TCP是全双工通信，在主动关闭方发送FIN报文后接收端可能还要发送数据，不能立即关闭服务端到客户端的数据通道，所以不能将服务端的FIN和ACK合并发送，只能先发送ACK，等服务端无需发送数据再发送FIN

7、TCP状态

CLOSED

LISTEN：表示服务器端的某个SOCKET处于监听状态，可以接受客户端的连接

SYN_RCVD：表示服务端收到客户端的SYN报文，很短暂平时不太容易看到，但是遇到SYN flood之类的SYN攻击时，会出现大量这种状态，即收不到三次握手最后一个客户端发来的ACK

SYN_SENT

ESTABLISHED

FIN_WAIT_1

FIN_WAIT_2：客户端收到ACK后就进入FIN_WAIT_2，然后等待服务端发送FIN，如果发现大量该状态，可能是网络不稳定或程序忘记调用连接关闭，FIN_WAIT_2有超时时间，由内核参数tcp_fin_timeout控制，当FIN_WAIT_2状态超时后，连接直接销毁

CLOSE_WAIT：表示正在等待关闭

LAST_ACK

TIME_WAIT：该状态是最常见的状态，主动方在收到对方FIN后，就由FIN_WAIT_2状态进入到TIME_WAIT状态

8、常见http状态码

|      | 类别           | 原因                       |
| ---- | -------------- | -------------------------- |
| 1xx  | 信息性状态码   | 接收的请求正在处理         |
| 2xx  | 成功状态       | 请求正常处理完毕           |
| 3xx  | 重定向         | 需要进行附加操作以完成请求 |
| 4xx  | 客户端错误代码 | 服务器无法处理请求         |
| 5xx  | 服务端错误代码 | 服务器处理请求出错         |

9、http和https的区别

http是明文传输，不安全

https是在http的基础上加入ssl/tls协议，依靠ssl证书来验证服务器身份，为客户端和服务端之间建立ssl通道，确保数据传输安全

10、访问一个url全过程

dns解析，得到url的ip

浏览器根据ip地址访问服务器，建立tcp连接

建立完tcp连接，浏览器向服务端发送http请求

服务器返回http响应给浏览器

浏览器展示网页，关闭tcp连接