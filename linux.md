# linux

1、linux基本组件

内核、shell、应用程序

2、一台 Linux 系统初始化环境后需要做一些什么安全工作？

- 1、添加普通用户登陆，禁止 root 用户登陆，更改 SSH 端口号。

> 修改 SSH 端口不一定绝对哈。当然，如果要暴露在外网，建议改下。

- 2、服务器使用密钥登陆，禁止密码登陆。
- 3、开启防火墙，关闭 SElinux ，根据业务需求设置相应的防火墙规则。
- 4、装 fail2ban 这种防止 SSH 暴力破击的软件。
- 5、设置只允许公司办公网出口 IP 能登陆服务器(看公司实际需要)

> 也可以安装 VPN 等软件，只允许连接 VPN 到服务器上。

- 6、修改历史命令记录的条数为 10 条。
- 7、只允许有需要的服务器可以访问外网，其它全部禁止。
- 8、做好软件层面的防护。
  - 8.1 设置 nginx_waf 模块防止 SQL 注入。
  - 8.2 把 Web 服务使用 www 用户启动，更改网站目录的所有者和所属组为 www 。

3、用户进程间的通信方式

管道

信号(Signal):信号是比较复杂的通信方式,用于通知接受进程有某种事件发生,除了用于进 程间通信外,进程还可以发送信号给进程本身

消息(Message)队列:有足够权限的进程可以向队列中添加消息,被赋予读权限的进程则可以读走队列中的消 息。

共享内存:使得多个进程可以访问同一块内存空间

套接字(Socket):主要用于在客户端和服务器之间通过网络进行通信,可用于不同机器之间的进程间通信。

4、如何规划一台Linux主机，步骤是怎样？

确定机器是做什么用的，比如是做 WEB 、DB、还是游戏服务器。不同用途配置可能不一样

确定好之后，就要定系统需要怎么安装，默认安装哪些系统、分区怎么做。

需要优化系统的哪些参数，需要创建哪些用户等等的。

5、linux内核参数优化

全局用户可打开文件数：echo "fs.file-max=102400" >> /etc/sysctl.conf

用户可打开文件数和进程数：/etc/security/limits.conf；查看：ulimit -n

单个进程可操作的文件数：/etc/security/limits.d/20-nproc.conf



端口范围：net.ipv4.ip_local_port_range = 1024 65000

tcp_wmem：TCP写buffer,可参考的优化值: 8192 436600 873200

tcp_rmem ：TCP读buffer,可参考的优化值: 32768 436600 873200

netdev_max_backlog：进入包的最大设备队列.默认是300,对重负载服务器而言,该值太低,可调整到1000

tcp_max_syn_backlog：表示SYN队列的长度，默认为1024，加大队列长度为8192，可以容纳更多等待连接的网络连接数。

somaxconn：listen()的默认参数,挂起请求的最大数量.默认是128.对繁忙的服务器,增加该值有助于网络性能.可调整到256.



