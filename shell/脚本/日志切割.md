logcut.log

```shell
#!/bin/bash
# 作者：日行一善 <qq：1969679546> <email：1969679546@qq.com>
# 官网：www.linkops.cn
#
# 日期：2018/6/22
# 介绍：简单的日志切割脚本，前3天的切割方便随时看，前4-10天的进行压缩，超出的删除
#
# 适用：centos6+
# 语言：中文
#
# 注意：要注意文件夹中不要有其它日志，否则也会切割

#流程
#主体：先检查是否是log文件，是则检查是否是切割后文件，不是则去切割，是则检查时间是否3天内的，3天外则压缩
#切割：检查是否有这个文件，有则将日志重定向到切割后的文件，清空日志。没有则复制一份，清空日志
#压缩：检查是否有这个文件，有则删除。压缩文件，并删除源文件
#检查压缩：检查是否有tar.gz结尾文件，有则匹配是否带时间，带时间则看是否超过10天，超过删除。不带时间则跳过

#日志切割 <日志格式： xxxxx.当前年-月-日.log> <压缩格式： xxxxx.当前年-月-日.tar.gz>

#[使用设置]
#日志文件所在目录，将切割这个文件夹下所有日志
log_dir=/ops/logs

#以切割形式保存的文件天数
date_cut=3

#以压缩形式保存的天数
date_yasuo=7

#[自动获取]
#当前年月日
date_now=`date +%F`

#当前年月
date_nian=`date +%Y-`

#前3天数组
date_cut_zu=($(for i in `seq 1 ${date_cut}`;do date -d -${i}days "+%F";done))

#前10天数组
date_time=`expr $date_cut + $date_yasuo`
date_yasuo_zu=($(for i in `seq 1 ${date_time}`;do date -d -${i}days "+%F";done))

#对日志名进行格式处理，$1填写要处理的文件
Format_Name() {
    local a=`echo ${1%%.log}`
    local b=`echo ${a%%-log}`
    echo $b
}

#对传入的日志文件进行切割处理,$1填写要切割文件
Cut_log(){
	local file=`Format_Name $1`
	local cut_file="${file}.${date_now}.log"
}
```

