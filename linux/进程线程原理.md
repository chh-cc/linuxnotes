## 进程

**在 Linux 系统中，进程和线程几乎没有区别**。

linux系统存在多个彼此独立的进程同时运行,每个用户会同时运行多个进程.

在某些用户空间,即使用户退出登录,仍然会有一些后台进程在运行,这些进程被称为**守护进程(daemon)**

linux中有一种特殊的守护进程称为**计划守护进程**，计划守护进程可以每分钟醒来一次检查是否有工作要做，做完会继续回到睡眠状态等待下一次唤醒。

僵尸进程无法杀死，因为僵尸进程已经死了，它在等待父进程对其进行捕获

处于阻塞状态的进程只有再次唤醒后才会被 kill 掉

### 什么是进程

计算机抽象图：

![image-20210716174305164](https://gitee.com/c_honghui/picture/raw/master/img/20210716174305.png)

用户空间装着用户进程需要使用的资源，内核空间存放内核进程需要加载的系统资源

程序只是一个文件，可执行程序要载入内存，包装成一个进程才能跑起来，进程创建好后，读入你的程序，你的程序才被系统执行

### 什么是线程

多进程和多线程都是并发，都可以提高处理器的利用效率



### 进程间的通信

#### 信号signal

通过`kill -l`列出系统使用的信号

进程可以选择忽略发送过来的信号，但是有两个是不能忽略的：`SIGSTOP` 和 `SIGKILL` 信号。SIGSTOP 信号会通知当前正在运行的进程执行关闭操作，SIGKILL 信号会通知当前进程应该被杀死。

SIGKILL 通常是作为最后杀死进程的信号、它通常作用于 SIGTERM 没有响应时发送给进程。

#### 管道

在两个进程之间，可以建立一个通道，一个进程向这个通道里写入字节流，另一个进程从这个管道中读取字节流

`sort <f | head`会创建两个进程，一个是 sort，一个是 head

#### 套接字socket

socket 提供端到端的双相通信，一个套接字可以与一个或多个进程关联。套接字一般用于两个进程之间的网络通信

### 进程管理系统调用

操作系统可以分为两种模式

- 内核态：操作系统内核使用的模式
- 用户态：用户应用程序所使用的模式

我们常说的`上下文切换` 指的就是内核态模式和用户态模式的频繁切换。而`系统调用`指的就是引起内核态和用户态切换的一种方式，系统调用通常在后台静默运行，表示计算机程序向其操作系统内核请求服务。

#### fork

fork 调用用于创建一个与父进程相同的子进程，创建完进程后的子进程拥有和父进程一样的程序计数器、相同的 CPU 寄存器、相同的打开文件。