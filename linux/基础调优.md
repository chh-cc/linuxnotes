# 基础调优

禁用不需要的服务

通过chattr锁定重要系统文件：/etc/passwd /etc/shadow /etc/group /etc/gshadow /etc/inittab

配置系统同时打开最大文件数

```shell
vi /etc/profile
ulimit -SHn 65535
```

关闭selinux，清空iptables

```shell
sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config
grep SELINUX=disabled /etc/selinux/config
setenforce 0
iptables -F
iptables -X
iptables -Z
iptables -L
```

 添加普通用户并进行sudo授权管理

```shell
visudo
liwen       ALL=(ALL)      NOPASSWD: ALL
```

 变更默认的ssh服务端口，禁止root用户远程连接

```shell
sed -i 's/#Port 22/Port 52113/g' /etc/ssh/sshd_config
sed -i 's/#PermitRootLogin yes/PermitRootLogin no/g' /etc/ssh/sshd_config
sed -i 's/#PermitEmptyPasswords no/PermitEmptyPasswords no/g' /etc/ssh/sshd_config
sed -i 's/GSSAPIAuthentication yes/GSSAPIAuthentication no/g' /etc/ssh/sshd_config
sed -i 's/#UseDNS yes/UseDNS no/g' /etc/ssh/sshd_config
cat /etc/ssh/sshd_config|egrep 'PermitEmptyPasswords|UseDNS|Port|GSSAPIAuthentication|PermitRootLogin'
```

对于云服务器可添加如下防止ssh连接中断

```shell
ClientAliveInterval 60
ClientAliveCountMax 86400
```

定时备份系统重要文件

