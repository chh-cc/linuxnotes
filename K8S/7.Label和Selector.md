# Label和Selector

我们创建一个deployment资源，它之所有能守护下面启动的N个pod以达到期望的数据，service之所以能把流量准确无误的转发到指定的pod上去，归根结底都是labels在这里起作用.

Label：对k8s各种资源进行分类、分组，添加一个具有特殊属性的标签。

Selector：通过语法对Label进行过滤查找标签

## Label

给node02打标签：

```shell
kubectl label node k8s-node02 region=subnet7
```

查看指定标签的节点：

```shell
kubectl get node -l region=subnet7
```

查看所有namespace的pod的标签：

```shell
kubectl get po -A --show-labels
```

给pod打标签：

```shell
kubectl label po busybox app=busybox
```

查看指定标签的pod

```shell
kubectl get po -A -l app=busybox
```

删除pod的app标签

```shell
kubectl label po busybox app- -n kube-public
```

删除某个节点的app标签

```shell
kubectl label node master03 app-
```

修改pod的标签

```shell
kubectl label po busybox app=busybox2 -n kube-public --overwrite
```

## Selector

查看标签为k8s-app=metrics-server和kubernetes-dashboard的pod

```shell
kubectl get po -A -l 'k8s-app in (metrics-server,kubernetes-dashboard)'
```

查看标签version不等于v1且app=nginx的pod

```shell
kubectl get po -A -l version!=v1,app=nginx
```

## label与annotations的区别

label用于识别、匹配不同的对象，k8s集群会care所有对象的label，annotation不会被k8s集群内部使用和care，但是将annotations附着在object上肯定也是有用的，这些annotations会被外部的工具或库所使用。